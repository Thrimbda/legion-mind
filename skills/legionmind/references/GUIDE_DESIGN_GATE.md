# 设计门禁指南 (Design Gate Guide)

> **强制要求**: 所有编码任务必须在开始实现前通过设计门禁。

---

## 1. 核心规则

**无设计，不编码 (No Code Without Design Approval)。**

在写第一行生产代码之前，你必须有一个清晰的、已批准的计划。“边写边想”会导致技术债务和反复返工。

## 2. 快速通道 (Fast Track / 豁免权)

**仅当**任务满足**所有**以下条件时，你可以跳过正式的 RFC/设计评审流程：
1.  **极小规模**: 代码改动 < 10 行。
2.  **低影响**: 修改 <= 2 个文件。
3.  **安全**: 无接口变更、无 Schema 变更、无新依赖。
4.  **无风险**: 不涉及关键路径（认证、支付、加密等）。

*即使走快速通道，你仍然需要一个 `plan.md`，但内容可以非常精简。*

## 3. 标准流程

1.  **起草设计 (RFC)**:
    - 创建 `docs/rfc.md` (或类似文件)。
    - 定义用户故事、接口、数据模型和验证计划。
2.  **更新计划索引**:
    - 更新 `plan.md` 以链接到 RFC。
3.  **自检**:
    - 验证所有需求是否已覆盖。
    - 检查边界情况。
4.  **请求批准**:
    - 请求用户（或 Reviewer Agent）批准设计。
5.  **门禁开启**:
    - 一旦批准，进入实现阶段。

## 4. 如果设计变了怎么办？

如果在实现过程中发现设计缺陷：
1.  **停止** 编码。
2.  **更新** RFC/设计文档。
3.  **记录** 变更到 `context.md` (决策表)。
4.  **重新验证**（如果变更是重大的，需再次征求用户同意）。
